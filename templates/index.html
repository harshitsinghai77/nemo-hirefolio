<!DOCTYPE html>
<html>
  {% include "header.html" %}
  <body>
    <div id="datatable"></div>
    <button class="button button-primary" id="add-new-row">Add Row</button>
    <button class="button button-red" id="remove-selected-row">Delete</button>
    <button class="button button-primary" id="my-google-sign-in-button">
      Signin with Google
    </button>

    <script src="https://unpkg.com/sortablejs@1.7.0/Sortable.min.js"></script>
    <script src="https://unpkg.com/clusterize.js@0.18.0/clusterize.min.js"></script>
    <script src="https://unpkg.com/frappe-datatable@1.17.4/dist/frappe-datatable.min.js"></script>
    <script src="static/util.js"></script>
    <script>
      let datatable; // Declare outside

      (async () => {
        try {
          const { columns, dataFromAPI } = await getSampleData();
          datatable = new DataTable("#datatable", {
            columns,
            data: dataFromAPI,
            checkboxColumn: true,
            inlineFilters: true,
            getEditor: getEditor,
          });
        } catch (error) {
          // Handle errors gracefully, e.g., display an error message to the user
          console.error("Error fetching data:", error);
        }
      })();
    </script>
  </body>
</html>
